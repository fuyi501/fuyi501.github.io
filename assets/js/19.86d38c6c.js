(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{746:function(t,s,r){"use strict";r.r(s);var a=r(104),e=Object(a.a)({},(function(){var t=this,s=t.$createElement,r=t._self._c||s;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("blockquote",[r("p",[t._v("frp 是一个可用于内网穿透的高性能的反向代理应用，支持 tcp, udp 协议，为 http 和 https 应用协议提供了额外的能力，且尝试性支持了点对点穿透。")])]),t._v(" "),r("p",[t._v("官方网站：https://diannaobos.com/frp/")]),t._v(" "),r("h2",{attrs:{id:"_1-使用示例"}},[t._v("1. 使用示例 "),r("a",{staticClass:"header-anchor",attrs:{href:"#_1-使用示例"}},[t._v("#")])]),t._v(" "),r("ol",[r("li",[r("p",[t._v("外网通过 ssh 访问内网机器")])]),t._v(" "),r("li",[r("p",[t._v("通过自定义域名访问部署于内网的 web 服务")])])]),t._v(" "),r("h2",{attrs:{id:"_2-配置前准备"}},[t._v("2. 配置前准备 "),r("a",{staticClass:"header-anchor",attrs:{href:"#_2-配置前准备"}},[t._v("#")])]),t._v(" "),r("ol",[r("li",[t._v("公网服务器 1 台")]),t._v(" "),r("li",[t._v("内网服务器 1 台")]),t._v(" "),r("li",[t._v("公网服务器备案好的域名 1 个，ssh 访问内网机器不需要域名，访问内网的 web 服务需要公网服务器绑定域名")]),t._v(" "),r("li",[t._v("内网服务器部署一个 web 服务")])]),t._v(" "),r("h2",{attrs:{id:"_3-安装-frp"}},[t._v("3. 安装 frp "),r("a",{staticClass:"header-anchor",attrs:{href:"#_3-安装-frp"}},[t._v("#")])]),t._v(" "),r("ol",[r("li",[r("p",[t._v("公网服务器与内网服务器都需要下载 frp 进行安装，下载地址 "),r("a",{attrs:{href:"https://github.com/fatedier/frp/releases",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/fatedier/frp/releases"),r("OutboundLink")],1),t._v("，下载的时候可以直接下载，也可以使用 wget 下载")])]),t._v(" "),r("li",[r("p",[t._v("公网服务器和内网服务器各下载一份，并解压到你喜欢的目录")])]),t._v(" "),r("li",[r("p",[t._v("解压之后有 7 个文件，分别是 frpc、frpc.ini、frpc_full.ini 和 frps、frps.ini、frps_full.ini LICENSE，其中 frps 和 frps.ini 是公网服务器所使用的文件，frpc 和 frpc.ini 是内网服务器所使用的文件。使用的时候可以将无关的文件删除，只留下需要使用的文件。")])])]),t._v(" "),r("h2",{attrs:{id:"_4-配置-frp"}},[t._v("4. 配置 frp "),r("a",{staticClass:"header-anchor",attrs:{href:"#_4-配置-frp"}},[t._v("#")])]),t._v(" "),r("h3",{attrs:{id:"通过-ssh-访问公司内网机器"}},[t._v("通过 ssh 访问公司内网机器 "),r("a",{staticClass:"header-anchor",attrs:{href:"#通过-ssh-访问公司内网机器"}},[t._v("#")])]),t._v(" "),r("p",[r("strong",[t._v("1. 公网服务器配置")])]),t._v(" "),r("p",[t._v("修改 frps.ini 文件，这里使用了最简化的配置：")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("# frps.ini\n[common]\nbind_port = 7000\n")])])]),r("p",[t._v("启动 frps：")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("./frps -c ./frps.ini\n")])])]),r("p",[r("strong",[t._v("2. 内网服务器配置")])]),t._v(" "),r("p",[t._v("修改 frpc.ini 文件，假设 frps 所在服务器的公网 IP 为 x.x.x.x；")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("# frpc.ini\n[common]\nserver_addr = x.x.x.x\nserver_port = 7000\n\n[ssh]\ntype = tcp\nlocal_ip = 127.0.0.1\nlocal_port = 22\nremote_port = 6000\n")])])]),r("p",[t._v("启动 frpc：")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("./frpc -c ./frpc.ini\n")])])]),r("p",[t._v("通过 ssh 访问内网机器，假设用户名为 test：")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("ssh -p 6000 test@x.x.x.x\n")])])]),r("h3",{attrs:{id:"通过自定义域名访问部署于内网的-web-服务"}},[t._v("通过自定义域名访问部署于内网的 web 服务 "),r("a",{staticClass:"header-anchor",attrs:{href:"#通过自定义域名访问部署于内网的-web-服务"}},[t._v("#")])]),t._v(" "),r("p",[t._v("有时想要让其他人通过域名访问或者测试我们在本地搭建的 web 服务，但是由于本地机器没有公网 IP，无法将域名解析到本地的机器，通过 frp 就可以实现这一功能，以下示例为 http 服务，https 服务配置方法相同， vhost_http_port 替换为 vhost_https_port， type 设置为 https 即可。")]),t._v(" "),r("p",[r("strong",[t._v("1. 公网服务器配置")])]),t._v(" "),r("p",[t._v("修改 frps.ini 文件，设置 http 访问端口为 8080：")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("# frps.ini\n[common]\nbind_port = 7000\nvhost_http_port = 8080\n")])])]),r("p",[t._v("启动 frps：")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("./frps -c ./frps.ini\n")])])]),r("p",[t._v("修改 frpc.ini 文件，假设 frps 所在的服务器的 IP 为 x.x.x.x，local_port 为本地机器上 web 服务对应的端口, 绑定自定义域名 www.yourdomain.com:")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("# frpc.ini\n[common]\nserver_addr = x.x.x.x\nserver_port = 7000\n\n[web]\ntype = http\nlocal_port = 80\ncustom_domains = www.yourdomain.com\n")])])]),r("p",[t._v("启动 frpc：")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("./frpc -c ./frpc.ini\n")])])]),r("p",[t._v("将 www.yourdomain.com 的域名 A 记录解析到 IP x.x.x.x，如果服务器已经有对应的域名，也可以将 CNAME 记录解析到服务器原先的域名。")]),t._v(" "),r("p",[t._v("通过浏览器访问 http://www.yourdomain.com:8080 即可访问到处于内网机器上的 web 服务。")])])}),[],!1,null,null,null);s.default=e.exports}}]);